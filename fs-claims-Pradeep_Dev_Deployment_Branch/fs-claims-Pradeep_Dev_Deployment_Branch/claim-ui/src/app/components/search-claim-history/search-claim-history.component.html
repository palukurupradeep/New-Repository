<app-sidenav (onToggleSideNav)="onToggleSideNav($event)"></app-sidenav>
<div class="body" [ngClass]="getBodyClass()">
  <app-header fetchClaimDetails="fetchClaimDetails(claimNumber)"></app-header>
  <div class="main pb-4">
    <div class="container-fluid">
      <div class="p-3">
        <h4>Search Claims History</h4>
        <div class="row">
          <form [formGroup]="searchClaimHistory" (ngSubmit)="finalSearch()">
            <h6 class="mb-3 py-2">Search For Claim</h6>
            <div class="col-12">
              <div class="form-group row mb-2">
                <label for="" class="col-sm-3 col-form-label">Primary Search<span
                    class="text-danger fail-style ">*</span></label>
                <div class="col-sm-9 ">
                  <div class="form-group row">
                    <div class="col-6 text-uppercase position-relative mb-2">
                      <mat-form-field appearance="fill">
                        <mat-select placeholder="Search Claim" formControlName="primarySearchType"
                          (selectionChange)="onOptionChange($event)">
                          <mat-option *ngFor="let option of primarySearchDropDown" [value]="option.lookupCode">
                            {{ option.lookupCode }} - {{ option.lookupDescription }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <div class="text-danger fail-style "
                        *ngIf="searchClaimHistory.get('primarySearchType')?.touched && searchClaimHistory.get('primarySearchType')?.invalid">
                        This field is required
                      </div>



                    </div>
                    <!-- dont display for few selections like INS,CON, USR -->
                    <div class="col-6 text-uppercase position-relative mb-2 pr-2 pl-0"
                      *ngIf="searchClaimHistory.get('primarySearchType')?.value && !['INS', 'CON', 'USR'].includes(selectedOption)">
                      <i class="fa fa-search text-primary" *ngIf="isCustomerSelected" (click)="onSearchIconClick()"
                        [class.disabled]="searchClaimHistory.get('primaryValue')?.invalid || searchClaimHistory.get('primaryValue')?.value === ''"></i>
                      <input class="form-control" type="text" appInputRestriction [inputType]="inputRestrictionType"
                        formControlName="primaryValue">

                      <div class="col-9 text-uppercase position-relative mb-2 mt-2 pl-new"
                        *ngIf="isCustomerDetailsVisible">
                        <p class="fw-semibold">
                        <div>
                          <span><a href="">{{ customerDetails.customerNumber }}</a></span>

                        </div>
                        <div>
                          <span>{{ customerDetails.customerName }}</span>

                        </div>
                        <div> <span>{{ customerDetails.phoneNumber }}</span></div>
                        <div>
                          <span>{{ customerDetails.customerEmail }}</span>
                        </div>
                        <ng-container *ngFor="let address of customerDetails.address">
                          <ng-container *ngIf="address.addressType === 'PHYSICAL'">
                            <div>
                              <span>{{ address.addressLine1 }}</span>
                              <span>{{ address.city }}</span>
                            </div>

                            <div>
                              <span>{{ address.stateCode }} </span>
                              <span>{{ address.zipCode }}</span>
                            </div>
                          </ng-container>
                        </ng-container>
                      </div>
                      <!-- Error message for empty field -->
                      <div
                        *ngIf="(searchClaimHistory.get('primaryValue')?.touched && searchClaimHistory.get('primaryValue')?.hasError('required'))&& !displayCustomerError"
                        class="text-danger fail-style ">
                        This field should not be empty
                      </div>
                      <div *ngIf="displayCustomerError || displayMessageRec.customerDetails"
                        class="text-danger fail-style ">
                        {{ displayMessageRec.customerDetails }}
                      </div>
                      <!-- Error message for exceeding maximum length -->
                      <div
                        *ngIf="searchClaimHistory.get('primarySearchType')?.value === 'CUS' && searchClaimHistory.get('primaryValue')?.hasError('maxlength') && !displayCustomerError && !displayMessageRec.customerDetails"
                        class="text-danger fail-style ">

                        customer number should not be more than 7 character
                      </div>

                    </div>
                  </div>
                </div>
              </div>

              <!-- Secondary search appears for the following -->
              <div class="form-group row">
                <!-- Only shows if Cus - customerz is chosen, continued -->
                <div class="options-field">
                  <div class="col-3"></div>


                  <!-- Only shows if Cus - customer is chosen, continued -->

                  <div class="col-12 mb-2 " *ngIf="selectedOption === 'CUS'">
                    <div class="form-group row">
                      <label for="" class="col-sm-3 col-form-label">Primary Customer Search</label>
                      <div class="col-sm-1">
                        <div class="form-check form-switch">
                          <input type="checkbox" (change)="onCheckboxChange($event)"
                            [(ngModel)]="isPrimarySearchChecked" class="form-check-input mt-2">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>

              <div class="col-12 " *ngIf="secondarySearchOptions && secondarySearchOptions.length > 0">
                <div class="form-group row mb-2">
                  <label for="" class="col-sm-3 col-form-label">Secondary Search</label>
                  <div class="col-sm-9 ">
                    <div class="form-group row">
                      <div class="col-6 text-uppercase position-relative mb-2">
                        <mat-form-field appearance="fill">
                          <mat-select placeholder="Select Secondary Search" formControlName="secondarySearchType"
                            (selectionChange)="onSecondarySearchTypeChange($event)">
                            <mat-option *ngFor="let option of secondarySearchOptions" [value]="option.lookupCode">
                              {{ option.lookupDescription }}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div class="col-6 text-uppercase position-relative mb-2 pr-2 pl-0"
                        *ngIf="searchClaimHistory.get('secondarySearchType')?.value">
                        <input class="form-control" formControlName="secondaryValue" type="text">
                        <div
                          *ngIf="(searchClaimHistory.get('secondaryValue')?.touched && searchClaimHistory.get('secondaryValue')?.hasError('required'))&& !displayCustomerError"
                          class="text-danger fail-style ">
                          This field should not be empty
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>

              <!--Only shows if INS - Inspector is chosen -->

              <div class="options-field row" *ngIf="selectedOption === 'INS'">
                <div class="col-12 mb-2 top-header-field">
                  <label for="" class="col-sm-12 col-form-label">Claims Vendor Search:</label>
                </div>

                <div class="col-12 ">
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">Claims Vendor Number</label>
                    <div class="col-sm-9">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <input class="form-control" type="text">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">Name</label>
                    <div class="col-sm-9">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <input class="form-control" type="text">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">DBA Name</label>
                    <div class="col-sm-9">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <input class="form-control" type="text">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">City</label>
                    <div class="col-sm-9">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <input class="form-control" type="text">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">Country</label>
                    <div class="col-sm-9 ">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <mat-form-field appearance="fill">
                            <mat-select placeholder="Select Country" placeholder="Select Country">
                              <mat-option value="UNITED STATES">
                                UNITED STATES
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">State/Province</label>
                    <div class="col-sm-9 ">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <mat-form-field appearance="fill">
                            <mat-select placeholder="Select State/Province">
                              <mat-option value="Option1">
                                Option1
                              </mat-option>
                              <mat-option value="Option2">
                                Option2
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">Postal Code</label>
                    <div class="col-sm-9">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <input class="form-control" type="text">
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">Phone</label>
                    <div class="col-sm-9 mb-2">
                      <div class="form-group row">
                        <div class="phone-1-col col-sm-6">
                          <div class="form-input mb-lg-0 mb-2">
                            <select class="form-select form-control" aria-label="Default select example"
                              aria-placeholder="Select Code" id="phoneNumberCountryCode">
                              <option value="+1">+1</option>
                            </select>
                          </div>
                        </div>
                        <div class="phone-2-col col-sm-6 pr-1 pl-0">
                          <div class="form-input">
                            <input type="text" class="form-control" id="phone" maxlength=12 minlength=10
                              placeholder="(555) 444 - 1234" />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group row mb-2">
                    <label for="" class="col-sm-3 col-form-label">Service Type</label>
                    <div class="col-sm-9 ">
                      <div class="form-group row">
                        <div class="col-6 text-uppercase position-relative mb-2 ">
                          <mat-form-field appearance="fill">
                            <mat-select placeholder="Select Service Type">
                              <mat-option value="ALL">
                                ALL
                              </mat-option>
                              <mat-option value="Option1">
                                Option1
                              </mat-option>
                              <mat-option value="Option2">
                                Option2
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- INS - Inspector ends -->

              <!-- Only shows if USR - User name is chosen -->
              <form formGroupName="claimUserSearchForm">
                <div class="options-field row " *ngIf="selectedOption === 'USR'">
                  <div class="col-12 ">
                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Claim User Search</label>
                      <div class="col-sm-9 ">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2">
                            <mat-form-field>
                              <mat-select placeholder="Select Group" formControlName="userGroupId"
                                (selectionChange)="getManagersList($event.value)">
                                <mat-option *ngFor="let group of groupList" [value]="group.userGroupId">
                                  {{ group.userGroupDescription }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="col-6 text-uppercase position-relative mb-2 pr-2 pl-0">
                            <mat-form-field>
                              <mat-select placeholder="Select Manager" formControlName="userId"
                                (selectionChange)="onManagerSelected($event)">
                                <mat-option *ngFor="let manager of managerList" [value]="manager.userId">
                                  {{ manager.firstName + ' ' + manager.middleInitial + ' ' + manager.lastName }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
              <!-- USR - User name ends -->

              <!--Only shows if CON - End user/consumer is chosen -->
              <div class="options-field row " *ngIf="selectedOption === 'CON'">
                <form [formGroup]="consumerSearchForm">
                  <div class="col-12 mb-2 top-header-field">
                    <label for="" class="col-sm-12 col-form-label">Consumer Search:</label>
                  </div>

                  <div class="col-12">
                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">First Name</label>
                      <div class="col-sm-9">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <input class="form-control" formControlName="firstName" type="text">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Last Name</label>
                      <div class="col-sm-9">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <input class="form-control" formControlName="lastName" type="text">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Company Name</label>
                      <div class="col-sm-9">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <input class="form-control" formControlName="companyName" type="text">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Address</label>
                      <div class="col-sm-9">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <textarea class="form-control" formControlName="addressLine1"
                              placeholder="Address Line 1"></textarea>
                          </div>
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <textarea class="form-control" formControlName="addressLine2"
                              placeholder="Address Line 2"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">City</label>
                      <div class="col-sm-9">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <input class="form-control" formControlName="city" type="text">
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Country</label>
                      <div class="col-sm-9 ">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2">
                            <mat-form-field appearance="fill">
                              <mat-select formControlName="country" (selectionChange)="getCountryCodeByStates()">
                                <mat-option *ngFor="let country of countries" [value]="country.isoCountryId">
                                  {{ country.isoCountryName }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">State/Province</label>
                      <div class="col-sm-9">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2">
                            <mat-form-field appearance="fill">
                              <mat-select formControlName="state" placeholder="select the state">
                                <mat-option *ngFor="let state of filteredStates" [value]="state.isoStateId">
                                  {{ state.isoStateName }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>


                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Phone</label>
                      <div class="col-sm-9 mb-2">
                        <div class="form-group row">
                          <div class="phone-1-col col-sm-2">
                            <mat-form-field appearance="fill">
                              <mat-select formControlName="phoneCountryCode" id="phoneNumberCountryCode">
                                <mat-option *ngFor="let dialCode of isoDialingCodes" [value]="dialCode">
                                  {{ dialCode }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                          <div class="phone-2-col col-sm-6 pr-1">
                            <div class="form-input">
                              <input type="text" formControlName="phoneNumber" class="form-control" id="phone-business"
                                maxlength="12" minlength="10" placeholder="(555) 444 - 1234" />
                            </div>
                          </div>
                          <div class="phone-3-col col-sm-1 pl-0">
                            <label for="" class="col-form-label">Ext.</label>
                          </div>
                          <div class="phone-4-col col-sm-3 pl-0 pr-2">
                            <div class="form-input">
                              <input type="text" formControlName="phoneExtension" class="form-control"
                                id="phone-business" maxlength="12" minlength="10" />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>


                    <div class="form-group row mb-2">
                      <label for="" class="col-sm-3 col-form-label">Service Type</label>
                      <div class="col-sm-9 ">
                        <div class="form-group row">
                          <div class="col-6 text-uppercase position-relative mb-2 ">
                            <mat-form-field appearance="fill">
                              <mat-select formControlName="serviceType" placeholder="Select Service Type">
                                <mat-option value="ALL">
                                  ALL
                                </mat-option>
                                <mat-option value="DEBIT MEMO">
                                  DEB - DEBIT MEMO
                                </mat-option>
                                <mat-option value="CREDIT MEMO">
                                  CRM - CREDIT MEMO
                                </mat-option>
                                <mat-option value="RGA">
                                  RET - RGA
                                </mat-option>
                                <mat-option value="PURCHASE ORDER">
                                  PON - PURCHASE ORDER
                                </mat-option>
                                <mat-option value="SERIAL NUMBER">
                                  SER - SERIAL NUMBER
                                </mat-option>
                                <mat-option value="STORE NUMBER">
                                  STO - STORE NUMBER
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
              <!-- CON - End user/consumer ends -->

              <!-- Other/secondary search ends -->



            </div>


            <!-- next labels in the form other than primary search begins -->

            <div class="col-12">
              <div class="form-group row mb-2">
                <label for="" class="col-sm-3 col-form-label">Claim Status</label>
                <div class="col-sm-9 row">
                  <div class="form-group">
                    <div class="col-6 text-uppercase position-relative mb-2">
                      <mat-form-field appearance="fill">
                        <mat-select placeholder="Claim Status" formControlName="claimStatus"
                          (selectionChange)="claimStatus($event)">
                          <mat-option *ngFor="let status of claimStatuses" [value]="status.claimStatusCode">
                            {{ status.claimStatusDescription }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>


                    </div>
                  </div>
                </div>
              </div>
            </div>


            <div class="col-12 mb-2">
              <form [formGroup]="searchClaimHistory">
                <div class="form-group row mb-2 align-items-center">
                  <label class="col-sm-3 col-form-label">Claim Initiation Date (From - To)</label>
                  <div class="col-sm-9 row">
                    <div class="form-group col-6 text-uppercase position-relative pr-0">
                      <input type="text" formControlName="claimInitiationFromDate" #fromDatePicker="bsDatepicker"
                        class="form-control" [bsConfig]="bsConfig" bsDatepicker triggers="dblclick:click"
                        (bsValueChange)="onFromDateChange($event)" placeholder="MM/DD/YYYY"
                        (input)="autoFormatDate($event)" />
                      <span class="datepicker" (click)="fromDatePicker.toggle()">
                        <i class="fa-regular fa-calendar-days"></i>
                      </span>
                      <div class="fail-style text-danger" *ngIf="fromDateFutureError"> 'From' date cannot be in future.
                      </div>
                    </div>
                    <div class="form-group col-6 text-uppercase position-relative pr-0">
                      <input type="text" formControlName="claimInitiationToDate" #toDatePicker="bsDatepicker"
                        class="form-control" [bsConfig]="bsConfig" bsDatepicker triggers="dblclick:click"
                        (bsValueChange)="onToDateChange($event)" placeholder="MM/DD/YYYY"
                        (input)="autoFormatDate($event)" />
                      <span class="datepicker" (click)="toDatePicker.toggle()">
                        <i class="fa-regular fa-calendar-days"></i>
                      </span>
                      <div class="fail-style text-danger" *ngIf="toDateFutureError"> 'To' date cannot be in future.
                      </div>
                    </div>
                    <div class="form-group row mb-2 align-items-center">
                      <div class="text-danger fail-style " *ngIf="dateRangeError"> 'To' date should not be earlier than
                        'From' date.
                      </div>
                    </div>
                  </div>
                </div>

              </form>
            </div>

            <div class="col-12">
              <div class="form-group row mb-2 align-items-center">
                <label for="" class="col-sm-3 col-form-label">Claim Amount (From - To)</label>
                <div class="col-sm-9 row">
                  <div class="form-group col-6 text-uppercase position-relative pr-0">
                    <input type="text" formControlName="claimAmountFrom" placeholder="0.00" class="form-control" />

                  </div>
                  <div class="form-group col-6 text-uppercase position-relative pr-0">
                    <input type="text" formControlName="claimAmountTo" placeholder="0.00" class="form-control" />

                  </div>
                  <div *ngIf="searchClaimHistory.errors?.amountsMismatch" class=" text-danger fail-style">
                    Claim Amount From should be less than Claim Amount To.
                  </div>
                </div>

              </div>
            </div>

            <div class="col-12">

              <!-- <div class="form-group row">
    <label for="" class="col-sm-3 col-form-label">Summary</label>
    <div  class="col-sm-1">
        <div class="form-check form-switch">
            <input type="checkbox"  class="form-check-input mt-2">
        </div>
    </div>     
</div> -->
              <!-- Only show this msg when value is entered in primary search text box -->
              <div class="row mt-2 d-none">
                <p class="text-uppercase fw-bold mb-0" style="color:red">
                  End of on-line claims. Select history for claims history.
                </p>
              </div>
              <div class="row mt-3 mb-3">
                <div class="col-12 text-end">
                  <button type="submit" class="btn btn-primary mx-2" [disabled]="isSearchButtonDisabled()">
                    Search
                  </button>
                  <button type="button" class="btn btn-secondary mx-2" (click)="confirmReset()">
                    Reset
                  </button>
                  <!-- <button type="button" class="btn btn-secondary mx-2">
                    Back
                  </button> -->
                  <button type="button" routerLink="/work-history" class="btn btn-secondary">
                    Cancel
                  </button>
                </div>
              </div>
            </div>
          </form>
          <div class="col-12 mt-3">
            <div class="d-flex justify-content-between">
              <h6 class="mb-3 py-2">Claim Search Results</h6>
              <button type="button" class="btn btn-primary align-self-center" (click)="exportToExcel()">Export to
                Excel</button>
            </div>
            <div class="row">
              <p class="col-4" style="font-weight: 500;">Total Claims Found : <span>{{ claimsCount }}</span></p>
            </div>

            <div class="table-responsive mb-3">
              <!-- <form > -->
              <table class="table table-striped table-hover" id="search-results-table" matSort
                (matSortChange)="sortData($event)">
                <thead>
                  <tr>
                    <th mat-sort-header="status">Status</th>
                    <th mat-sort-header="claimNbr">Claim No.</th>
                    <th mat-sort-header="claimDate">Claim Date</th>
                    <th mat-sort-header="lastActivityDate">Last Activity Date</th>
                    <th mat-sort-header="customerNbr">Customer No.</th>
                    <th>Customer Name</th>
                    <th>SC/R/D/T</th>
                    <th>Invoice</th>
                    <th>RGA No.</th>
                    <th>Debit Memo</th>
                    <th>Credit Memo</th>
                    <th>Amount</th>
                    <th mat-sort-header="claimReason">Claim Reason</th>
                    <th>Consumer Name</th>
                    <th mat-sort-header="state">St</th>
                  </tr>
                </thead>

                <tbody>
                  <ng-container *ngIf="loading; else dataLoaded">
                    <tr>
                      <td colspan="15" class="text-center">
                        <div class="spinner-container">
                          <mat-spinner diameter="40"></mat-spinner>
                        </div>
                      </td>
                    </tr>
                  </ng-container>
                  <ng-template #dataLoaded>
                    <ng-container *ngIf="claimsData && claimsData.length; else noClaims">
                      <!-- <tr *ngFor="let claim of claimsData"> -->
                      <tr *ngFor="let claim of displayedUsers">
                        <td>{{ claim.status }}</td>
                        <td><a [routerLink]="['/claim-detail',claim.claimNbr]" target="_blank">{{ claim.claimNbr }}</a>
                        </td>
                        <td>{{ claim.claimDate }}</td>
                        <td>{{ claim.lastActivityDate }}</td>
                        <td id="popover-new-wd1">
                          <a containerClass="customClassTooltip" [popover]="CustomerNumbernew1" placement="right"
                            triggers="hover">{{ claim.customerNbr }}</a>
                        </td>

                        <td>{{ claim.customerName }}</td>
                        <td><a matTooltip="{{ claim.territoryManagerDescription || 'No description available' }}"
                            href="">{{ claim.sellingCompany || '00'}}/
                            {{claim.region || '00' }}/
                            {{ claim.division ||'000' }}/
                            {{claim.territory || '0000' }} </a></td>
                        <td>

                          <div *ngFor="let invoice of claim.invoiceDetailsArray">

                            <a href="">{{ invoice.invoiceNumber}}</a>&nbsp;
                            {{ invoice.invoiceDate }}&nbsp;
                            {{ invoice.invoiceAmount }}
                          </div>
                        </td>
                        <td>
                          <div *ngIf="claim.rgaDetailsArray && claim.rgaDetailsArray.length > 0; else noRGA">
                            <div *ngFor="let rga of claim.rgaDetailsArray">
                              <a [href]="">{{ rga.rgaNbr }}</a>&nbsp;
                              {{ rga.rgaDate }}&nbsp;
                              {{ rga.rgaAmount }}
                            </div>
                          </div>
                          <ng-template #noRGA>
                            <div><b>No RGA</b></div>
                          </ng-template>
                        </td>

                        <td>
                          <div *ngIf="claim.debitMemo; else noDebitMemo">
                            {{ claim.debitMemo }}
                          </div>
                          <ng-template #noDebitMemo>
                            <div><b>No Debit Memos</b></div>
                          </ng-template>
                        </td>

                        <td>
                          <div *ngIf="claim.crmDetailsArray && claim.crmDetailsArray.length > 0; else noCreditMemo">
                            <div *ngFor="let crm of claim.crmDetailsArray">
                              <a href="">{{ crm.crmNumber || 'No Credit Memo ' }}</a>&nbsp;
                              {{ crm.crmDate }}&nbsp;
                              {{ crm.crmAmount }}&nbsp;
                              <a href="">{{ crm.crmReasonCode }}</a>
                            </div>
                          </div>
                          <ng-template #noCreditMemo>
                            <div><b>No Credit Memo</b></div>
                          </ng-template>
                        </td>

                        <td class="text-end"> ${{ claim.amount | number: '1.2-2' }}</td>
                        <td class="text-center"><a
                            matTooltip="{{ claim.reasonCodeDescription || 'No description available' }}"
                            href=""><span>{{
                              claim.claimReason }}</span></a></td>
                        <td>{{ claim.consumerName }}</td>
                        <td>{{ claim.state }}</td>
                      </tr>
                    </ng-container>
                  </ng-template>
                  <ng-template #noClaims>
                    <tr>
                      <td colspan="15" class="text-center">No Claims Found</td>
                    </tr>
                  </ng-template>
                </tbody>
              </table>

              <ng-template #CustomerNumbernew1>
                <div class="table-responsive">
                  <table class="table mb-0 text-uppercase">
                    <tr>
                      <th class="text-center white-nowrap">
                        Comm Cust
                      </th>
                      <th class="text-center white-nowrap">
                        Comm Cust Name
                      </th>
                      <th class="text-center white-nowrap">
                        Store Type
                      </th>
                      <th class="text-center white-nowrap">
                        Bill To
                      </th>
                    </tr>
                    <tr>
                      <td class="text-center">
                        6868697
                      </td>
                      <td class="text-center text-uppercase">
                        Elite FLOORING & Design INC.
                      </td>
                      <td class="text-center text-uppercase">
                        EV - EVERAGAIN
                      </td>
                      <td class="text-center text-uppercase">
                        <p class="bg-transparent text-white">3110 Crossing Park rd
                          <br>
                          NORCROSS, 30071
                        </p>
                      </td>
                    </tr>
                  </table>
                </div>
              </ng-template>



              <!-- </form> -->
            </div>
            <!-- pagination.component.html -->
            <div class="row">
              <div class="col-sm-12 col-md-6 text-end text-md-start">
                <div class="dataTables_paginate paging_simple_numbers d-sm-inline-block">
                  <ul class="pagination">
                    <li class="page-item">
                      <a class="page-link" (click)="onPreviousUserPageClick()" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                      </a>
                    </li>
                    <ng-container *ngFor="let page of getUserPageNumbers()">
                      <li class="page-item" [class.active]="page === userCurrentPage">
                        <a class="page-link" (click)="onUserPageNumberClick(page)">{{ page === -1 ? '...' : page }}
                        </a>
                      </li>
                    </ng-container>
                    <li class="page-item">
                      <a class="page-link" (click)="onNextUserPageClick()" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>

              <div class="col-sm-12 col-md-6 mt-2 text-end">
                <div class="dataTables_length d-sm-inline-block table-page-view">
                  <div class="d-flex align-items-center">
                    <label class="per-page-style white-nowrap">Per Page</label>
                    <select
                      class="custom-select custom-select-sm form-select form-control form-control-sm per-page-select-style"
                      id="perPageSelect" [(ngModel)]="userItemsPerPage" (change)="onPageUserSizeChange()">
                      <option *ngFor="let option of perPageOptions" [value]="option">{{ option }}</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <app-footer></app-footer>
  </div>
</div>